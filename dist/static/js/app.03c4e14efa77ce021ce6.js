webpackJsonp([1],{BYWR:function(t,i){},BkhJ:function(t,i){},FYtj:function(t,i){},J5eu:function(t,i){},JBH2:function(t,i){},NHnr:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("7+uW"),n=s("Dd8w"),a=s.n(n),o=s("Vimu"),r=s.n(o),c=s("Xxa5"),l=s.n(c),u=s("exGp"),d=s.n(u),m=s("NYxO"),g=s("//Fk"),p=s.n(g),v=s("mtWM"),f=s.n(v);f.a.defaults.baseURL=" http://meiyun.info:3000/",f.a.interceptors.response.use(function(t){return t.data},function(t){return p.a.reject(t.response.data)});var h=f.a,_=h.get("/logout",{withCredentials:!0,params:{random:Math.random()}}),C={props:["children"],data:function(){return{imgUrl:null,nickname:null}},computed:a()({},Object(m.c)(["loginStatus"])),watch:{loginStatus:function(t){var i=this;return d()(l.a.mark(function s(){var e;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=12;break}return s.prev=1,s.next=4,n=localStorage.getItem("uid"),h.get("/user/detail",{params:{uid:n}});case 4:e=s.sent,i.imgUrl=e.profile.avatarUrl,i.nickname=e.profile.nickname,s.next=12;break;case 9:s.prev=9,s.t0=s.catch(1),console.log(s.t0);case 12:case"end":return s.stop()}var n},s,i,[[1,9]])}))()}},methods:a()({},Object(m.b)(["getThenSetLoginStatus"]),{logoutThenUpdateLoginStatus:function(){var t=this;return d()(l.a.mark(function i(){return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,_();case 3:t.getThenSetLoginStatus(),i.next=9;break;case 6:i.prev=6,i.t0=i.catch(0),console.log(i.t0);case 9:case"end":return i.stop()}},i,t,[[0,6]])}))()},toLoginPage:function(){this.$props.children[0].slideout.close(),this.$router.push({name:"Login"}),console.log("登录")}})},k={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("section",{staticClass:"side-bar-menu"},[s("div",{staticClass:"menu-top"},[s("div",{staticClass:"unlogin-style"},[s("p",{staticClass:"login-desc1"},[t._v("登陆网易云音乐")]),t._v(" "),s("p",{staticClass:"login-desc2"},[t._v("手机电脑多端同步，尽享海量高品质音乐")]),t._v(" "),s("div",{staticClass:"login-btn-container"},[s("button",{staticClass:"login-btn",on:{click:t.toLoginPage}},[t._v("立即登录")])])]),t._v(" "),s("div",{staticClass:"haslogin-style"},[s("div",{staticClass:"img-container"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl,expression:"imgUrl"}],staticClass:"avatar",attrs:{alt:""}})]),t._v(" "),s("h1",{staticClass:"nickname"},[t._v(t._s(t.nickname))])])]),t._v(" "),s("div",{staticClass:"menu-body"},[s("div",{staticClass:"my-items"},[s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-xiaoxi",staticStyle:{color:"#f00","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("我的消息")])])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-yonghu",staticStyle:{color:"#f00","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("我的好友")])])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-huanfu",staticStyle:{color:"#f00","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("个性换肤")])])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-maikefeng",staticStyle:{color:"#f00","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("听歌识曲")])])])]),t._v(" "),s("div",{staticClass:"items-container"},[s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-fujin-"}),t._v("\r\n                    附近的人\r\n                ")])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-icon--"}),t._v("\r\n                    我的铃声\r\n                ")])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-saoyisao"}),t._v("\r\n                   扫一扫\r\n                ")])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-shouye"}),t._v("\r\n                    商城\r\n                ")])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-timer"}),t._v("\r\n                    定时播放\r\n                ")])])])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"menu-footer"},[i("div",{staticClass:"btn-wrap"},[i("div",[i("button",{staticClass:"logout-btn"},[i("i",{staticClass:"iconfont icon-biaoqing"}),this._v("\r\n                        夜间模式\r\n                    ")])]),this._v(" "),i("div",[i("button",{staticClass:"logout-btn"},[i("i",{staticClass:"iconfont icon-shezhi1"}),this._v("\r\n                        设置\r\n                    ")])]),this._v(" "),i("div",[i("button",{staticClass:"logout-btn"},[i("i",{staticClass:"iconfont icon-shut-down"}),this._v("\r\n                        退出\r\n                    ")])])])])}]};var b=s("VU/8")(C,k,!1,function(t){s("jUd/")},"data-v-fa38b814",null).exports,y={name:"app",components:{Slideout:r.a,SideBarMenu:b},methods:a()({},Object(m.b)(["getTheSetLoginStatus"]),{open:function(){console.log("slideopen"),this.$refs.panel.addEventListener("click",this.closeSlideout,!0)},close:function(){console.log("slideclose"),this.$refs.panel.removeEventListener("click",this.closeSlideout,!0)},closeSlideout:function(t){t.preventDefault(),this.$refs.slideout.slideout.close()}}),created:function(){this.getTheSetLoginStatus()},mounted:function(){this.$refs.slideout.slideout.disableTouch()}},S={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("Slideout",{ref:"slideout",attrs:{menu:"#menu",panel:"#panel",toggleSelectors:[".toggle-button"],easing:"linear"},on:{"on-open":this.open,"on-close":this.close}},[i("nav",{attrs:{id:"menu"}},[i("side-bar-menu",{attrs:{children:this.$children}})],1),this._v(" "),i("main",{ref:"panel",attrs:{id:"panel"}},[i("header",[i("button",{staticClass:"toggle-button logout-btn"},[i("i",{staticClass:"iconfont icon-xiangmuxiangqing"})]),this._v(" "),i("keep-alive",[i("router-view")],1)],1)])])],1)},staticRenderFns:[]};var T=s("VU/8")(y,S,!1,function(t){s("Yi0u")},"data-v-7e4a391a",null).exports,w=s("/ocq"),L={props:["word","ifShow","callback"],computed:{reminderWrapClassName:function(){return this.ifShow?"reminder-wrap":"reminder-wrap hidden"}},methods:{hiddenReminder:function(){this.callback()}},mounted:function(){this.$refs.reminderWrap.style.height=document.documentElement.clientHeight+"px"}},U={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("p"),this._v(" "),i("section",{ref:"reminderWrap",class:this.reminderWrapClassName,on:{click:this.hiddenReminder}},[i("div",{staticClass:"reminder-container"})])])},staticRenderFns:[]};var x=s("VU/8")(L,U,!1,function(t){s("sNQp")},"data-v-32130a90",null).exports,I={data:function(){return{tel:null,password:null,reminderFlag:!1,reminderWord:""}},methods:a()({},Object(m.b)(["getTheSetLoginStatus"]),{cleanTel:function(){this.tel=null},resetReminder:function(){this.reminderFlag=!1},tryToLogin:function(t){var i=this;return d()(l.a.mark(function s(){var e;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.preventDefault(),console.log("我要登陆了"),s.prev=2,s.next=5,n=i.tel,a=i.password,h.get("/login/cellphone",{params:{phone:n,password:a,random:Math.random()},withCredentials:!0});case 5:return e=s.sent,localStorage.setItem("uid",e.account.id),s.next=9,i.getTheSetLoginStatus();case 9:i.$router.replace("/my"),console.log("登陆成功，欢迎",e.account.id),s.next=18;break;case 13:s.prev=13,s.t0=s.catch(2),console.dir(s.t0,"failed"),i.reminderFlag=!0,i.reminderWord=s.t0.msg;case 18:case"end":return s.stop()}var n,a},s,i,[[2,13]])}))()}}),components:{Reminder:x}},E={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("section",{staticClass:"login-wrap"},[s("form",{attrs:{action:""},on:{submit:t.tryToLogin}},[s("div",{staticClass:"phone-number-container"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],staticClass:"tel-input",attrs:{type:"tel",autofocus:"",required:"",pattern:"^1[34578]\\d{9}"},domProps:{value:t.tel},on:{input:function(i){i.target.composing||(t.tel=i.target.value)}}}),t._v(" "),s("button",{staticClass:"clean-btn",on:{click:t.cleanTel}},[s("i",{staticClass:"iconfont icon-chahao"})])]),t._v(" "),s("div",{staticClass:"password-container"},[t._m(1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"password-input",attrs:{type:"password",placeholder:"请输入密码",required:""},domProps:{value:t.password},on:{input:function(i){i.target.composing||(t.password=i.target.value)}}})]),t._v(" "),t._m(2)]),t._v(" "),s("reminder",{attrs:{word:t.reminderWord,ifShow:t.reminderFlag,callback:t.resetReminder}})],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("label",[i("i",{staticClass:"iconfont icon-shouji"}),this._v(" "),i("span",{staticClass:"country-code"},[this._v("+86")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("label",{attrs:{for:""}},[i("i",{staticClass:"iconfont icon-suo"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"login-btn-container"},[i("input",{staticClass:"login-btn",attrs:{type:"submit",value:"登录"}})])}]};var $=s("VU/8")(I,E,!1,function(t){s("Og1v")},"data-v-dc2bd7fa",null).exports,P=function(t){return h.get("/likelist",{params:{uid:t,random:Math.random()},withCredentials:!0})},z=function(t){return h.get("/user/playlist",{params:{uid:t}})},R={name:"My",data:function(){return{likelistId:null}},computed:a()({},Object(m.c)(["likelistCount","recentPlaylist"]),{recentPlayCount:function(){return this.recentPlaylist.length}}),methods:a()({},Object(m.b)(["getTheSetLikelist"]),{getData:function(){var t=this;return d()(l.a.mark(function i(){var s;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:s=localStorage.getItem("uid"),console.log("欢迎进入我的音乐界面,",s),t.getTheSetLikelist(s),t.getLikeListId(s);case 4:case"end":return i.stop()}},i,t)}))()},getLikeListId:function(t){var i=this;return d()(l.a.mark(function s(){var e;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,z(t);case 3:e=s.sent,console.log("/user/playlist:",e),i.likelistId=e.playlist[0].id,console.log("this.likelistId:",i.likelistId),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(0),console.log(s.t0);case 12:case"end":return s.stop()}},s,i,[[0,9]])}))()}}),created:function(){this.getData()}},N={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("ul",{staticClass:"play-list-group"},[s("li",{staticClass:"play-list-item"},[s("router-link",{attrs:{to:{name:"recentPlay"}}},[s("div",{staticClass:"icon-container"},[s("i",{staticClass:"iconfont icon-tubiaozhizuomoban"})]),t._v(" "),s("div",{staticClass:"play-list-desc"},[s("span",{staticClass:"play-list-title"},[t._v("最近播放")]),t._v(" "),s("span",{staticClass:"play-list-count"},[t._v("（"+t._s(t.recentPlayCount)+"）")])])])],1),t._v(" "),s("li",{staticClass:"play-list-item"},[s("router-link",{attrs:{to:{path:"/play-list-detail",query:{id:t.likelistId}}}},[s("div",{staticClass:"icon-container"},[s("i",{staticClass:"iconfont icon-xihuan"})]),t._v(" "),s("div",{staticClass:"play-list-desc"},[s("span",{staticClass:"play-list-title"},[t._v("我喜欢的音乐")]),t._v(" "),s("span",{staticClass:"play-list-count"},[t._v("（"+t._s(t.likelistCount)+"）")])])])],1)])])},staticRenderFns:[]};var O=s("VU/8")(R,N,!1,function(t){s("pDJq")},"data-v-37b2061a",null).exports,D={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"wrapper"},[s("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},[t._l(t.swiperList,function(i){return s("swiper-slide",{key:i.id,staticClass:"swiper-slide"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"banner-img swiper-lazy",attrs:{"data-src":i.imgUrl,alt:""}}),t._v(" "),s("div",{staticClass:"swiper-lazy-preloader"})])])}),t._v(" "),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)},staticRenderFns:[]};var F={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"my-items"},[s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-rili",staticStyle:{color:"#fff","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("每日推荐")])])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-yonghu",staticStyle:{color:"#fff","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("我的好友")])])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-_huabanfuben",staticStyle:{color:"#fff","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("排行榜")])])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-huanfu",staticStyle:{color:"#fff","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("个性换肤")])])]),t._v(" "),s("div",[s("button",{staticClass:"logout-btn",on:{click:t.logoutThenUpdateLoginStatus}},[s("i",{staticClass:"iconfont icon-maikefeng",staticStyle:{color:"#fff","font-size":"1.6rem"}}),t._v(" "),s("p",[t._v("听歌识曲")])])])])},staticRenderFns:[]};var q={data:function(){return{recomSongList:null}},methods:{getRecom:function(){var t=this;h.get("/personalized").then(function(i){t.recomSongList=i.result}).catch(function(t){console.log(t)})}},mounted:function(){this.getRecom()}},j={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"horizon-line left-right-padding-box"},[s("h1",{staticClass:"recom-songlist-header"},[t._v("推荐歌单 >")]),t._v(" "),s("ul",{staticClass:"songlist-group"},t._l(t.recomSongList,function(i,e){return s("li",{key:e,staticClass:"songlist-item"},[s("router-link",{attrs:{to:{path:"/play-list-detail",query:{id:i.id}}}},[s("div",{staticClass:"img-wrap"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.picUrl,expression:"item.picUrl"}],staticClass:"songlist-cover",attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"play-count-box"},[s("i",{staticClass:"iconfont icon-erji"}),t._v("\n            "+t._s((i.playCount/1e4).toFixed(0))+"万\n          ")])]),t._v(" "),s("p",{staticClass:"songlist-title"},[t._v(t._s(i.name))])])],1)}),0)])},staticRenderFns:[]};var B={components:{HomeSwiper:s("VU/8")({name:"HomeSwiper",data:function(){return{swiperOption:{autoplay:{disableOnInteraction:!1},loop:!0,pagination:{el:".swiper-pagination"},lazy:{loadPrevNext:!0}},swiperList:[{id:"001",imgUrl:"http://img1.qunarzz.com/piao/fusion/1805/d4/d41d77b6ba8aca02.jpg_750x200_ac3d9a73.jpg"},{id:"002",imgUrl:"http://img1.qunarzz.com/piao/fusion/1805/f1/e57bc93226317102.jpg_750x200_9ab37bd0.jpg"},{id:"003",imgUrl:"http://img1.qunarzz.com/piao/fusion/1804/c4/1cdd28811593b802.jpg_750x200_5fbb7c91.jpg"}]}}},D,!1,function(t){s("J5eu")},"data-v-4fd7c2c8",null).exports,FourCircles:s("VU/8")(null,F,!1,function(t){s("TVot")},"data-v-0150409b",null).exports,RecommendSongList:s("VU/8")(q,j,!1,function(t){s("piLF")},"data-v-2b07de6a",null).exports}},A={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"home"},[i("div",{staticClass:"redWall"}),this._v(" "),i("HomeSwiper"),this._v(" "),i("FourCircles"),this._v(" "),i("RecommendSongList")],1)},staticRenderFns:[]};var M=s("VU/8")(B,A,!1,function(t){s("BkhJ")},"data-v-52aec02c",null).exports,V={name:"SongList",props:["track"],data:function(){return{tracksarr:[]}},watch:{track:function(t,i){this.tracksarr=t,console.log("this.tracksarr",this.tracksarr),console.log("this.tracksarr.al",this.tracksarr[0])}}},W={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("ul",{staticClass:"track-list"},t._l(t.track,function(i,e){return s("li",{key:e,staticClass:"track-item"},[s("router-link",{staticClass:"link-to-play-control",attrs:{to:{path:"/song",query:{songId:i.id,songName:i.name,singer:i.ar[0].name,name:i.al.name,ImgUrl:i.al.picUrl}}}},[s("div",{staticClass:"track-rank"},[t._v(t._s(e+1))]),t._v(" "),s("div",{staticClass:"track-info"},[s("p",{staticClass:"tracktitle ellipsis"},[t._v(t._s(i.name))]),t._v(" "),s("p",{staticClass:"trackdesc ellipsis"},[t._v(t._s(i.ar[0].name)+" - "+t._s(i.al.name))])]),t._v(" "),s("div",{staticClass:"trackplay"},[s("i",{staticClass:"iconfont icon-icon-test"}),t._v(" "),s("i",{staticClass:"iconfont icon-dian"})])])],1)}),0)])},staticRenderFns:[]};var H=s("VU/8")(V,W,!1,function(t){s("BYWR")},"data-v-484c00de",null).exports,Y={render:function(){var t=this.$createElement,i=this._self._c||t;return i("button",{staticClass:"back-btn",on:{click:this.goBack}},[i("i",{staticClass:"iconfont icon-fanhui"}),this._v(" "),this._t("ret")],2)},staticRenderFns:[]};var G=s("VU/8")({props:["beforeBack"],methods:{goBack:function(){this.beforeBack&&this.beforeBack(),this.$router.back()}}},Y,!1,function(t){s("FYtj")},"data-v-706b65ca",null).exports,J={name:"PlayListDetail",data:function(){return{coverImgUrl:"",tracks:[],nickname:"",avatarUrl:"",trackCount:0}},components:{SongList:H,BackBtn:G},watch:{tracks:{handler:function(t){console.log("shendujianting1tracks:",t)},deep:!0}},methods:{getData:function(){var t,i=this;(t=this.$route.query.id,h.get("/playlist/detail",{params:{id:t,random:Math.random()}})).then(function(t){var s=t.playlist;i.coverImgUrl=s.coverImgUrl,i.nickname=s.creator.nickname,i.avatarUrl=s.creator.avatarUrl,i.tracks=s.tracks,i.trackCount=s.trackCount},function(t){console.log("error",t)})}},created:function(){this.getData()}},Q={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"play-list-container"},[s("section",{ref:"palyListDesc",staticClass:"play-list-detail-top"},[s("section",{staticClass:"backbtn-container",attrs:{slot:"ret"},slot:"ret"},[s("Back-btn",{staticClass:"backbutton"}),t._v(" "),s("div",{staticClass:"song-info"},[s("p",{staticClass:"song-name ellipsis"},[t._v("歌单")]),t._v(" "),s("marquee",{staticClass:"singers ellipsis"},[t._v("静心聆听音乐的魅力")])],1)],1),t._v(" "),s("div",{staticClass:"top-container"},[s("div",{staticClass:"img-wrap"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.coverImgUrl,expression:"coverImgUrl"}],staticClass:"cover-img"})]),t._v(" "),s("div",{staticClass:"user-wrap"},[s("h2",{staticClass:"play-list-title"},[t._v("我喜欢的音乐")]),t._v(" "),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarUrl,expression:"avatarUrl"}],staticClass:"avatar-img"}),t._v(" "),s("span",{staticClass:"nickname"},[t._v(t._s(t.nickname)+">")])])])]),t._v(" "),s("section",{staticClass:"play-list-detail-bottom"},[s("div",{staticClass:"play-list-detail-control"},[s("div",{staticClass:"play-all"},[s("i",{staticClass:"iconfont icon-bofangquanbu"}),t._v(" "),s("span",[t._v("播放全部（共"+t._s(t.trackCount)+"首）")])])]),t._v(" "),s("SongList",{attrs:{track:t.tracks}})],1)])},staticRenderFns:[]};var K=s("VU/8")(J,Q,!1,function(t){s("eqGL")},"data-v-6b79cf84",null).exports,X={name:"PlayControl",data:function(){return{iconClassname:"iconfont icon-bofang",curtime:0,alltime:0,musid:"",musname:"",musimgurl:"",musinger:"",musurl:"",mualname:""}},computed:a()({},Object(m.c)(["isPlaying","likelist"])),methods:a()({},Object(m.b)(["getTheSongInfo","getIsPlaying","getTheSetLikelist"]),{getScreenHeight:function(){return document.documentElement.clientHeight+"px"},setPageHeight:function(){this.$refs.pageWrap.style.height=this.getScreenHeight(),console.log("页面总高度：",this.$refs.pageWrap.style.height)},loaded:function(){this.$refs.audio.play(),this.curtime=0,this.alltime=this.$refs.audio.duration},updatetime:function(){this.curtime=this.$refs.audio.currentTime,this.$refs.progress.style.width=this.curtime/this.alltime*100+"%"},toggleToPlaying:function(){this.iconClassname="iconfont icon-zantingtingzhi",this.$refs.rotateImg.classList.add("rotate"),this.$refs.audio.play(),console.log("播放中.....url: ",this.$refs.audio.src)},toggleToStopPlaying:function(){this.iconClassname="iconfont icon-bofang",this.$refs.rotateImg.classList.remove("rotate"),this.$refs.audio.pause()},toggleStatus:function(){this.getIsPlaying(!this.isPlaying)},updatesongDetail:function(t){var i,s=this;(i=t,h.get("/song/detail",{params:{ids:i,random:Math.random()}})).then(function(t){var i=t.songs[0];s.musid=i.id,s.musname=i.name,s.musinger=i.ar[0].name,s.musimgurl=i.al.picUrl},function(t){console.log("err",t)}),this.getTheSongInfo({id:this.musid,musicname:this.musname,coverImgUrl:this.musimgurl,singer:this.musinger}),this.$refs.audio.src="https://music.163.com/song/media/outer/url?id="+this.musid+".mp3",this.getIsPlaying(!0)},preSong:function(){var t=this.likelist.indexOf(this.musid);this.musid=this.likelist[0===t?this.likelist.length-1:t-1],this.updatesongDetail(this.musid)},nextSong:function(){var t=this.likelist.indexOf(this.musid);this.musid=this.likelist[t===this.likelist.length-1?0:t+1],this.updatesongDetail(this.musid)}}),components:{BackBtn:G},watch:{isPlaying:function(t,i){this.loaded(),console.log("watch created likelist:"),t?this.toggleToPlaying():this.toggleToStopPlaying()}},filters:{formatTime:function(t){return(""+Math.floor(t/60)).padStart(2,"0")+":"+(""+Math.floor(t%60)).padStart(2,"0")}},created:function(){this.musid=this.$route.query.songId,this.musname=this.$route.query.songName,this.musimgurl=this.$route.query.ImgUrl,this.musinger=this.$route.query.singer,this.mualname=this.$route.query.name,this.getTheSongInfo({id:this.musid,musicname:this.musname,coverImgUrl:this.musimgurl,singer:this.musinger}),console.log("播放界面的likelist:",this.likelist)},mounted:function(){this.setPageHeight(),this.getIsPlaying(!0),this.$refs.audio.src="https://music.163.com/song/media/outer/url?id="+this.musid+".mp3"}},Z={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{ref:"pageWrap",staticClass:"play-container"},[s("section",{staticClass:"top-container"},[s("Back-btn",{staticClass:"back-btn"}),t._v(" "),s("div",{staticClass:"song-info"},[s("marquee",{staticClass:"song-name ellipsis"},[t._v(t._s(this.musname)+" ("+t._s(this.mualname)+")")]),t._v(" "),s("p",{staticClass:"singers ellipsis"},[t._v(t._s(this.musinger)+" >")])],1)],1),t._v(" "),s("section",{staticClass:"img-container"},[s("div",{staticClass:"cover-img-wrap"},[s("div",{ref:"rotateImg",staticClass:"img-wrap"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.musimgurl,expression:"this.musimgurl"}],staticClass:"cover-img",attrs:{alt:""}})])])]),t._v(" "),s("section",{staticClass:"play-info"},[s("div",{staticClass:"play-progress"},[s("span",{staticClass:"has-played-time"},[t._v(t._s(t._f("formatTime")(t.curtime)))]),t._v(" "),s("span",{staticClass:"total-progress"},[s("span",{ref:"progress",staticClass:"has-played-progress"})]),t._v(" "),s("span",{staticClass:"total-time"},[t._v(t._s(t._f("formatTime")(t.alltime)))])]),t._v(" "),s("div",{staticClass:"play-button"},[s("button",{staticClass:"btn",on:{click:t.preSong}},[s("i",{staticClass:"iconfont icon-shangyiqu"})]),t._v(" "),s("button",{staticClass:"btn center-btn",on:{click:t.toggleStatus}},[s("i",{class:t.iconClassname})]),t._v(" "),s("button",{staticClass:"btn",on:{click:t.nextSong}},[s("i",{staticClass:"iconfont icon-xiayiqu"})]),t._v(" "),s("audio",{ref:"audio",attrs:{src:"",autoplay:""},on:{canplaythrough:function(i){return t.loaded()},timeupdate:function(i){return t.updatetime()},ended:function(i){return t.end()}}})])])])},staticRenderFns:[]};var tt,it=s("VU/8")(X,Z,!1,function(t){s("JBH2")},"data-v-019736c8",null).exports,st=function(t){return h.get("/song/url",{params:{id:t},withCredentials:!0})},et={getTheSetLoginStatus:function(t){var i=this,s=t.commit;return d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get("/login/status",{withCredentials:!0,params:{random:Math.random()}});case 3:s("UPDATE_LOGIN_STATUS",!0),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),301===t.t0.code?s("UPDATE_LOGIN_STATUS",!1):console.log(t.t0);case 9:case"end":return t.stop()}},t,i,[[0,6]])}))()},getTheSetLikelist:function(t,i){var s=this,e=t.commit;return d()(l.a.mark(function t(){var n,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P(i);case 3:n=t.sent,a=n.ids,console.log("likelist:",a),e("SET_LIKE_LIST",a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("e",t.t0);case 12:case"end":return t.stop()}},t,s,[[0,9]])}))()},getTheSongInfo:function(t,i){var s=this,e=t.commit;return d()(l.a.mark(function t(){var n,o,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("songData:",i),n=i.id,console.log("musicId:",n),t.next=6,st(n);case 6:o=t.sent,r=o.data[0].url,e("UPDATE_RECENT_PLAYLIST",n),e("SET_SONG_INFO",a()({},i,{musicUrl:r})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}},t,s,[[0,12]])}))()},getTheTotalTime:function(t,i){(0,t.commit)("SET_TOTALTIME",i)},getTheCurrentTime:function(t,i){(0,t.commit)("SET_CURRENTTIME",i)},getIsPlaying:function(t,i){(0,t.commit)("SET_ISPLAYING",i)}},nt=s("bOdI"),at=s.n(nt),ot=(tt={},at()(tt,"UPDATE_LOGIN_STATUS",function(t,i){t.loginStatus=i}),at()(tt,"SET_LIKE_LIST",function(t,i){t.likelist=i}),at()(tt,"UPDATE_RECENT_PLAYLIST",function(t,i){var s=t.recentPlaylist,e=""+i;-1===s.indexOf(e)&&s.push(e)}),at()(tt,"SET_CURRENTTIME",function(t,i){t.currenttime=i}),at()(tt,"SET_TOTALTIME",function(t,i){t.totaltime=i}),at()(tt,"SET_SONG_INFO",function(t,i){t.songInfo=i}),at()(tt,"SET_ISPLAYING",function(t,i){t.isPlaying=i}),tt);e.a.use(m.a);var rt=new m.a.Store({state:{loginStatus:!1,likelist:[],recentPlaylist:[],songInfo:{id:"",musicname:"",coverImgUrl:"",singer:"",musicUrl:""},isPlaying:!1,totaltime:0,currenttime:0},getters:{loginStatus:function(t){return t.loginStatus},likelist:function(t){return t.likelist},likelistCount:function(t){return t.likelist.length},recentPlaylist:function(t){return t.recentPlaylist},isPlaying:function(t){return t.isPlaying},totaltime:function(t){return t.totaltime},currenttime:function(t){return t.currenttime},songInfo:function(t){return t.songInfo}},actions:et,mutations:ot}),ct=this;e.a.use(w.a);var lt=new w.a({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:M},{path:"/my",name:"My",component:O,meta:{needLogin:!0}},{path:"/login",name:"Login",component:$},{path:"/play-list-detail",name:"PlayListDetail",component:K},{path:"/song",name:"PlayControl",component:it}]});lt.beforeEach(function(t,i,s){console.log(ct.$Store),t.meta.needLogin&&!rt.state.loginStatus?lt.push("/login"):s()});var ut=lt,dt=(s("kLyD"),s("eDDz"),s("AXdl")),mt=s("7QTg"),gt=s.n(mt),pt=(s("v2ns"),s("v5o6")),vt=s.n(pt);e.a.use(gt.a),e.a.use(dt.a),vt.a.attach(document.body),e.a.config.productionTip=!1,new e.a({el:"#app",router:ut,store:rt,components:{App:T},template:"<App/>"})},Og1v:function(t,i){},TVot:function(t,i){},Yi0u:function(t,i){},eDDz:function(t,i){},eqGL:function(t,i){},"jUd/":function(t,i){},kLyD:function(t,i){},pDJq:function(t,i){},piLF:function(t,i){},sNQp:function(t,i){},v2ns:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.03c4e14efa77ce021ce6.js.map